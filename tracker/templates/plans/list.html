{% extends "base.html" %}

{% block content %}
<div class="plans-page">
  <div class="plans-header">
    <h2>üèãÔ∏è My Workout Plans</h2>

    {% if user_id %}
      <a href="{% url 'tracker:plan_create' %}" class="create-plan-btn">+ New Plan</a>
    {% endif %}
  </div>

  {% if plans %}
    <div class="plans-list">
      {% for plan in plans %}
        <div class="plan-card">
          <div class="plan-info">
            <div class="plan-title">
              <h3>{{ plan.name }}</h3>
              <span class="plan-version">v{{ plan.version }}</span>
            </div>
            <p class="plan-description">
              {{ plan.description|default:"No description"|truncatewords:22 }}
            </p>
          </div>

          <div class="plan-footer">
            {% if start_mode %}
              <a href="{% url 'tracker:plan_detail' plan.id %}?start=true" class="view-btn">View</a>
            {% else %}
              <a href="{% url 'tracker:plan_detail' plan.id %}" class="view-btn">View</a>
            {% endif %}
            <a href="{% url 'tracker:plan_update' plan.id %}" class="edit-btn">Edit</a>
            <form action="{% url 'tracker:plan_delete' plan.id %}" method="post" class="delete-form" onsubmit="return confirm('Delete this plan?')">
              {% csrf_token %}
              <button type="submit" class="delete-btn">Delete</button>
            </form>
          </div>

          {% if start_mode %}
          <div class="plan-start">
            <form action="{% url 'tracker:session_start' plan.id %}" method="post" onsubmit="this.action=this.action.split('?')[0];">
              {% csrf_token %}
              <button type="submit" class="create-plan-btn">Start now</button>
            </form>
          </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty-state">
      <p>You don‚Äôt have any workout plans yet.</p>
      {% if user_id %}
        <a href="{% url 'tracker:plan_create' %}" class="create-plan-btn">Create your first plan</a>
      {% endif %}
    </div>
  {% endif %}
</div>

<style>
.plans-page {
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 16px;
}

.plans-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.plans-header h2 {
  color: #e8edf2;
  margin: 0;
}

.create-plan-btn {
  background: #3ba9ff;
  color: #fff;
  text-decoration: none;
  padding: 10px 16px;
  border-radius: 6px;
  font-weight: 600;
  transition: background 0.2s, transform 0.1s;
}

.create-plan-btn:hover {
  background: #58b7ff;
  transform: translateY(-1px);
}

.plans-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 20px;
}

.plan-card {
  background: #12151a;
  border: 1px solid #1c2128;
  border-radius: 10px;
  padding: 20px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  transition: transform 0.2s, border-color 0.2s;
}

.plan-card:hover {
  transform: translateY(-3px);
  border-color: #3ba9ff;
}

.plan-title {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.plan-title h3 {
  color: #e8edf2;
  margin: 0;
}

.plan-version {
  background: #22314a;
  color: #9fb0c0;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 12px;
}

.plan-description {
  color: #9fb0c0;
  margin-top: 10px;
  line-height: 1.4;
  min-height: 48px;
}

.plan-footer {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 10px;
  margin-top: 20px;
}

<<<<<<< HEAD
.view-btn,
.edit-btn,
.delete-btn {
=======
.view-btn, .edit-btn, .delete-btn {
>>>>>>> origin/main
  text-decoration: none;
  border: none;
  border-radius: 6px;
  padding: 8px 14px;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  transition: opacity 0.2s;
}

.view-btn {
  background: #3ba9ff;
  color: #fff;
}

.view-btn:hover {
  opacity: 0.9;
}

.edit-btn {
  background: #4a4a4a;
  color: #fff;
  text-decoration: none;
}

.edit-btn:hover {
  opacity: 0.9;
}

.delete-btn {
  background: #f25353;
  color: #fff;
}

.delete-btn:hover {
  opacity: 0.85;
}

<<<<<<< HEAD
.plan-start {
  margin-top: 12px;
  text-align: right;
}

=======
>>>>>>> origin/main
.empty-state {
  text-align: center;
  color: #9fb0c0;
  margin-top: 60px;
}

.empty-state p {
  margin-bottom: 16px;
  font-size: 16px;
}
</style>
{% endblock %}
